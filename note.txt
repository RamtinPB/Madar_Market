old category management:

    Cat Manager:
    @/frontend/src/components/Admin/Cats_SubCats_Products_Manager/CatManager/ 
    id like you to professionally implement this structure (using mostly shadcn components) in CatManager:
    i want you to use the Table component from shadcn to make a table to display all the categories data (you can get said data using /categories/get-all)​.
    each row will show each individual category.
    the table should be equipt with a working searchbar.
    the table should have pagination enabled.
    each row will have a delete button and edit button at the end of the row (the table should be oriented rtl and the delete and edit buttons should be at the end to the left), so here is waht each row should look like: from the right, it will show the individual category's image, id, title, createdAt, updatedAt, and lastly the edit and then the delete buttons.
    the edit button should trigger a shadcn dialog component to open (we will design the dialog later--for now just know that after openning the dialog the /categories/get/{id}​ should be called to get that individual category's data).
    the delete button should initiate the /categories/delete/{id}​ call.
    additionally at the end of the table there will always (even if there are no categories) display an add button which will call /categories/create​ (after which /categories/get-all must be recalled to refresh the data)
    important note!: use mainly shadcn components as much as you can (you're encouraged to recommend any).


    CatManager dialog:
        @/frontend/src/components/Admin/Cats_SubCats_Products_Manager/CatManager/ 
        id like you to professionally implement this structure (using mostly shadcn components) in CatManager's dialog component:
        from the top (not including the dialog header which should simply display the category title on the right and the X for closing the dialog on the left--change dir if needed), there will be a section which contains the category's image in an enlarged shadcn avatar component positioned in the middle of the section and the title displayed beneath it.
        after this section (use a seporator component from shadcn), there will be edit section with from the top, an image upload input (use shadcn's input component) which will take in the new image for the category. once uploaded it will replace the preview shown in the avatar (simply visual and no backend change).
        under that will be a text input (again use shadcn) which will enable the user to alter the title (this should also alter the preview).
        and finally at the footer of the dialog there will be an apply button which will call​ /categories/edit-image/{id}/image​ (if an image is provided, otherwise it will skip this call) and /categories/edit/{id} with the altered data.


    SubCat Manager:
        @/frontend/src/components/Admin/Cats_SubCats_Products_Manager/SubCatManager/ 
        id like you to professionally implement this structure (using mostly shadcn components) in SubCatManager:
        i want you to use the Table component from shadcn to make a table to display all the sub categories data (you can get said data using /admin/subcategories​ )​.
        each row will show each individual sub category.
        the table should be equipt with a working searchbar dual equipt with search by sub category title and also using category id.
        the table should have pagination enabled (use shadcn pagination).
        each row will have a delete button and edit button at the end of the row (the table should be oriented rtl and the delete and edit buttons should be at the end to the left), so here is what each row should look like: from the right, it will show the individual sub category's id, title, category id, category title, createdAt, updatedAt, and lastly the edit and then the delete buttons.
        the edit button should trigger a shadcn dialog component to open (we will design the dialog later--for now just know that after openning the dialog the /categories/get/{id}​ should be called to get that individual category's data).
        the delete button should initiate the /subcategories/delete/{id}​ call.
        additionally at the end of the table there will always (even if there are no sub categories) display an add button which will call /subcategories/create​ (after which /admin/subcategories​ must be recalled to refresh the data)
        important note!: use mainly shadcn components as much as you can (you're encouraged to recommend any).

    SubCatManager dialog:
    @/frontend/src/components/Admin/Cats_SubCats_Products_Manager/CatManager/ 
        id like you to professionally implement this structure (using mostly shadcn components) in CatManager's dialog component:
        from the top (not including the dialog header which should simply display the category title on the right and the X for closing the dialog on the left--change dir if needed), there will be a section which contains the category's image in an enlarged shadcn avatar component positioned in the middle of the section and the title displayed beneath it.
        after this section (use a seporator component from shadcn), there will be edit section with from the top, an image upload input (use shadcn's input component) which will take in the new image for the category. once uploaded it will replace the preview shown in the avatar (simply visual and no backend change).
        under that will be a text input (again use shadcn) which will enable the user to alter the title (this should also alter the preview).
        and finally at the footer of the dialog there will be an apply button which will call​ /categories/edit-image/{id}/image​ (if an image is provided, otherwise it will skip this call) and /categories/edit/{id} with the altered data.

new cat - sub cat - products structure:


New cat and subcat management:
    @/frontend/src/components/Admin/
    id like you to professionally implement this structure (using shadcn components) in CatSubCatManager:
    the content will be split to a 1/3 edit section on the right and 2/3 display categories section on the left.
    the display categories section will host from the top, a search bar equipt to search through category titles and sub category titles and display results accordingly (under the saerch bar).
    under the search bar will be a vertically scrollable area hosting two columns of shadcn AccordionItem components, with their AccordionTrigger being a category Card and their AccordionContent displaying two columns of sub category cards for that individual category card.
    each category card will display from the left, an image (use shadcn's aspect ratio component), then a section with the category title on the top and two shadcn badge components one displaying the number of sub categories the individual category has (on the right) it also comes with a file icon, and one displaying the number of products within the individual category (on the left) comes with a box icon. at the left most side a button which when clicked will switch between the edit icon and cancel edit icon as well as select and deselect the edit section previously mentioned with that individual category's data for editing.
    each sub category card will display from the left, a box icon, then the title of the sub category (squished to fit in--you can even use Ellipses at the end of the text), and at the most left, the same edit and cancel edit button with the same functionality but for the sub category's data.
    the edit section will from the top have a "نام دسته بندی" input to edit the title (category title if the data loaded is a category and sub category title if a sub category is selected for editing), then below that a shadcn combobox component (its a combination of shadcn's popover and command components--you can see how its implemented in the combobox section in the components section of the official shadcn website) with the PopoverTrigger hosting a button with "گروه اصلی" written in it. and then in the PopoverContent there will be a Command component with a CommandInput (acting as the searchbar equipt to find all category titles) and the category titles being the command groups in the command list (also include a command empty) (the purpose of the combobox will be when the user selects a sub category to edit the category it belongs to).
    under the combobox there will be a section with an button (to the right) with an image icon in the middle acting as the image upload input (the categories have images not the sub categories), and to the left of the button, a text section with two <p> components.
    lastly, at the bottom of the edit section there will be an edit button to initiate the edit backend call based on if a category of sub category is selected.


PROMPT FOR FRONTEND RESTRUCTURE
ok ive restructured the backend. now lets move on to the frontend.
for context, here is the project structure i used to have:
"# Madar Market - Project Structure Documentation

## Project Overview

Madar Market is a full-stack e-commerce application built with a modern tech stack. The project consists of a TypeScript/Node.js backend using the Elysia framework and Prisma ORM, paired with a React/Next.js frontend. The application supports user authentication, product management, categories, shopping cart functionality, and administrative features.

## Technology Stack

### Backend

- **Framework**: Elysia (Fast, lightweight web framework for Bun/Node.js)
- **Database**: PostgreSQL with Prisma ORM
- **Authentication**: JWT-based authentication with role-based access control
- **File Storage**: Arvan Cloud S3 for file uploads
- **Language**: TypeScript
- **Architecture**: Clean Architecture with Repository Pattern

### Frontend

- **Framework**: Next.js with React
- **Styling**: Tailwind CSS
- **UI Components**: Radix UI primitives with custom components
- **State Management**: Zustand for global state
- **Icons**: Lucide React
- **Language**: TypeScript

## Complete Project Structure

```
madar_market/
├── backend/                          # Backend API server
│   ├── .env                          # Environment variables (not tracked)
│   ├── .gitignore                    # Git ignore rules for backend
│   ├── bun.lock                      # Bun package manager lockfile
│   ├── generated/                    # Generated Prisma client files
│   │   └── prisma/                   # Generated Prisma client
│   ├── index.ts                      # Backend entry point
│   ├── node_modules/                 # Dependencies (not tracked)
│   ├── note.txt                      # Developer notes
│   ├── package-lock.json             # NPM lockfile (fallback)
│   ├── package.json                  # Backend dependencies
│   ├── prisma/                       # Database schema and migrations
│   │   ├── schema.prisma             # Database schema definition
│   │   ├── config.ts                 # Prisma configuration
│   │   └── migrations/               # Database migration history
│   ├── public/                       # Static files served by backend
│   │   ├── carousel/                 # Carousel images
│   │   └── uploads/                  # User uploaded files
│   │       ├── categories/           # Category images
│   │       └── products/             # Product images
│   ├── README.md                     # Backend documentation
│   ├── src/                          # Source code
│   │   ├── infrastructure/           # Infrastructure layer
│   │   │   ├── auth/                 # Authentication infrastructure
│   │   │   │   ├── auth.guard.ts     # Authentication guard
│   │   │   │   ├── jwt.provider.ts   # JWT token provider
│   │   │   │   └── role.guard.ts     # Role-based access guard
│   │   │   ├── db/                   # Database infrastructure
│   │   │   │   └── prisma.client.ts  # Prisma client configuration
│   │   │   ├── filesystem/           # File system infrastructure
│   │   │   │   └── local.storage.ts  # Local storage implementation
│   │   │   └── storage/              # Storage infrastructure
│   │   │       └── s3.storage.ts     # S3 storage implementation
│   │   ├── modules/                  # Feature modules (Clean Architecture)
│   │   │   ├── auth/                 # Authentication module
│   │   │   │   ├── auth.controller.ts    # Auth controller
│   │   │   │   ├── auth.repository.ts    # Auth repository
│   │   │   │   ├── auth.route.ts         # Auth routes
│   │   │   │   └── auth.service.ts       # Auth business logic
│   │   │   ├── categories/           # Categories module
│   │   │   │   ├── categories.repository.ts
│   │   │   │   ├── categories.route.ts
│   │   │   │   ├── categories.schema.ts  # Category validation schema
│   │   │   │   └── categories.service.ts
│   │   │   ├── product/              # Products module
│   │   │   │   ├── products.repository.ts
│   │   │   │   ├── products.route.ts
│   │   │   │   ├── products.schema.ts    # Product validation schema
│   │   │   │   └── products.service.ts
│   │   │   └── subCategories/        # Subcategories module
│   │   │       ├── subCategories.repository.ts
│   │   │       ├── subCategories.route.ts
│   │   │       ├── subCategories.schema.ts # Subcategory validation schema
│   │   │       └── subCategories.service.ts
│   │   ├── shared/                   # Shared utilities and helpers
│   │   │   ├── errors/               # Error handling
│   │   │   │   └── http-errors.ts    # HTTP error definitions
│   │   │   ├── files/                # File handling utilities
│   │   │   │   └── file.validation.ts # File validation logic
│   │   │   ├── http/                 # HTTP utilities
│   │   │   │   └── swagger.ts        # Swagger documentation
│   │   │   ├── security/             # Security utilities
│   │   │   │   └── hash.ts           # Password hashing utilities
│   │   │   └── validation/           # Input validation
│   │   │       └── auth.ts           # Authentication validation
│   │   ├── server.ts                 # Server configuration
│   │   └── prisma.config.ts          # Prisma configuration
│   └── tsconfig.json                 # TypeScript configuration
├── frontend/                         # Next.js frontend application
│   ├── .gitignore                    # Git ignore rules for frontend
│   ├── components.json               # shadcn/ui component config
│   ├── eslint.config.mjs             # ESLint configuration
│   ├── middleware.ts                 # Next.js middleware
│   ├── next.config.ts                # Next.js configuration
│   ├── package-lock.json             # NPM lockfile
│   ├── package.json                  # Frontend dependencies
│   ├── postcss.config.mjs            # PostCSS configuration
│   ├── README.md                     # Frontend documentation
│   ├── tsconfig.json                 # TypeScript configuration
│   ├── .next/                        # Next.js build output (generated)
│   ├── app/                          # Next.js App Router
│   │   ├── favicon.ico               # Site favicon
│   │   ├── globals.css               # Global styles
│   │   ├── layout.tsx                # Root layout component
│   │   ├── (auth)/                   # Authentication routes
│   │   │   ├── layout.tsx            # Auth layout wrapper
│   │   │   ├── login/                # Login page
│   │   │   │   └── page.tsx
│   │   │   └── signup/               # Signup page
│   │   │       └── page.tsx
│   │   ├── (main)/                   # Main application routes
│   │   │   ├── layout.tsx            # Main app layout
│   │   │   ├── page.tsx              # Home page
│   │   │   ├── cart/                 # Shopping cart
│   │   │   │   └── page.tsx
│   │   │   ├── home/                 # Home screen
│   │   │   │   └── page.tsx
│   │   │   ├── orders/               # Orders page
│   │   │   │   └── page.tsx
│   │   │   └── profile/              # User profile
│   │   │       └── page.tsx
│   │   └── admin/                    # Admin panel
│   │       └── (panel)/              # Admin interface
│   │           ├── layout.tsx.tsx    # Admin layout
│   │           └── page.tsx          # Admin dashboard
│   ├── data_store/                   # Zustand state management
│   │   └── useCartStore.ts           # Shopping cart store
│   ├── hooks/                        # Custom React hooks
│   │   └── use-mobile.ts             # Mobile detection hook
│   ├── public/                       # Static assets
│   │   └── assets/                   # Application assets
│   │       ├── footer/               # Footer icons and graphics
│   │       ├── header/               # Header icons and graphics
│   │       └── home_screen/          # Home screen assets
│   │           ├── categories/       # Category icons
│   │           └── [other assets]    # Additional home screen assets
│   └── [additional frontend files]   # Additional frontend structure
└── note.txt                          # Project notes
```

## Key Directory Descriptions

### Backend Structure (`backend/`)

#### Clean Architecture Layers

- **`src/infrastructure/`**: Infrastructure layer for external concerns

  - **auth**: JWT authentication, guards, and role-based access control
  - **db**: Database connection and Prisma client configuration
  - **filesystem**: File system abstractions and local storage
  - **storage**: Storage abstractions and S3 integration

- **`src/modules/`**: Feature modules following Clean Architecture pattern

  - Each module contains: repository, route, schema, and service files
  - **auth**: JWT authentication, login, registration, token management
  - **categories**: Product category management with repository pattern
  - **product**: Product CRUD operations with validation schemas
  - **subCategories**: Subcategory management with hierarchical structure

- **`src/shared/`**: Shared utilities and cross-cutting concerns
  - **errors**: HTTP error definitions and handling
  - **files**: File validation and handling utilities
  - **http**: HTTP utilities and Swagger documentation
  - **security**: Password hashing and security utilities
  - **validation**: Input validation schemas and rules

#### Database Layer

- **`prisma/`**: Database layer
  - `schema.prisma`: Database schema with models for users, products, categories, etc.
  - `migrations/`: Database migration history
  - `config.ts`: Prisma configuration with environment variable loading

#### Configuration Files

- **`server.ts`**: Server configuration and setup
- **`index.ts`**: Application entry point
- **`package.json`**: Dependencies including Elysia, Prisma, AWS SDK, JWT libraries

### Frontend Structure (`frontend/`)

#### App Router (`app/`)

- **Route Groups**: Organized using Next.js App Router
  - `(auth)`: Authentication pages (login, signup)
  - `(main)`: Main application pages (home, cart, orders, profile)
  - `admin`: Administrative interface

#### State Management

- **`data_store/`**: Zustand stores for global state management
  - `useCartStore.ts`: Shopping cart state management

#### Component Organization

- Feature-based component structure organized by screen/feature
- Reusable UI components built with Radix UI primitives

#### Styling & Assets

- **`public/assets/`**: Static assets organized by feature
- **`globals.css`**: Global styles and Tailwind imports

## Development Guidelines

### Backend Development

1. **Clean Architecture**: Follow the separation of concerns with infrastructure, modules, and shared layers
2. **Repository Pattern**: Use repositories for data access abstraction
3. **Database Changes**: Create Prisma migrations for schema changes
4. **API Design**: RESTful endpoints with proper HTTP status codes
5. **Authentication**: JWT-based with role-based access control
6. **Validation**: Use schema-based validation for all inputs

### Frontend Development

1. **Component Structure**: Functional components with TypeScript
2. **State Management**: Use Zustand for global state, React hooks for local state
3. **Styling**: Tailwind CSS with custom design system
4. **Routing**: Next.js App Router with proper route grouping

## Key Features Implemented

- **User Authentication**: JWT-based auth with role-based access control
- **Product Management**: CRUD operations with categories and subcategories
- **Shopping Cart**: Add/remove items, quantity management with Zustand
- **File Upload**: S3 integration for product and category images
- **Admin Panel**: User and content management interface
- **Responsive Design**: Mobile-first approach with Tailwind CSS
- **Type Safety**: Full TypeScript implementation across both frontend and backend
- **Clean Architecture**: Maintainable backend with clear separation of concerns

## Database Schema Highlights

The Prisma schema includes models for:

- **Users**: Authentication and profile data with role management
- **Products**: Product information with categories and attributes
- **Categories/SubCategories**: Hierarchical product organization
- **Orders**: Shopping cart and order management
- **File Uploads**: Image management and storage references

This structure provides a scalable foundation for an e-commerce platform with room for expansion into features like reviews, wishlists, payment processing, and analytics.
"
