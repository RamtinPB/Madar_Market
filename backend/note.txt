elysia.js
postgresql
dbengi
table plus crack
prisma
table +


// backend structure:
inside /backend =>
/prisma/schema.prisma
and then,
/public/uploads/categories and products and subcategories folders
and then,
/src/ modules and utils folders and server.ts
inside /modules => auth and categories and product and user folders
each host for example auth.controller and .middleware and .route and .service .ts files
subsequently,
the /utils folder has => hash.ts and jwt.ts and etc.


reconfigure prisma postgres & run the backend:
    1.  npx prisma init --db --output ../generated/prisma
    2.  copy database url to the .env file

    // if using local postgres server and database start from here
    3.  npx prisma migrate dev
    4.  npx prisma generate
    5.  bun run dev


// category, sub categories, products schema
i need your help writing this structure for the backend of my project:
context: im using bun + elysia + prisma + postgres + typescript
what i have implemented: a refresh and access JWT system where users also having roles such as USER or SUPER_ADMIN.
what i want:
1. i want to implement this new structure: there will be categories, which host an image, a title, and an order (the super admin will upload the images and edit other content). in addition, each category will also have sub categories, which host a title, and an order (same mechanic for the super admin). in addition to that, each sub category will also have multiple products, these products will each have multiple images--each product image will have an order. the products will also host a title, a description, a discount (a number will be displayed as a percentage), a price, a discounted price, and a sponsor price.
2. i want to professionally and correctly create these backend routes:
/categories/getAll (get all categories)
/categories/:categoryId/getAll (get all subcategories associated with that category)
/categories/:categoryId/:subCategoryId/getAll (get all products associated with that sub category)

the super admin (only the super admin) should also be able to:
1. add/edit/delete the categories data
2. add/edit/delete the sub categories data
3. add/edit/delete the products data

i have this idea for the add/edit/delete:
/admin/categories/:categoryId/add (may not require the categoryId) or edit or delete
/admin/categories/:categoryId/:subCategoryId/add (may not require the categoryId) or edit or delete
/admin/categories/:categoryId/:subCategoryId/:productId/add (may not require the categoryId) or edit or delete

note that add will simply make an empty item. it will be filled through the edit option.

however, on further thought, i think maybe it doesnt have to be specific like this "...:categoryId/:subCategoryId/:productId...". if the association is there then we could just call that specific product or sub category or category. they are already linked.

these are the ideas i have, what is your recommendation for implementing this like a professional project.

p.s. i will store the images in the public folder in the backend (in a structured way with each image having being placed in its appropriate folder and given a relevant name if possible).



// image upload
given my projects backend  @/backend/  the put /categories/{id} doesnt take in the relevant data its supposed to as its editing responsabilities require.
it should take the specific categories title and image.
as for the image part its logic needs to be implemented.
here is what you need to know about the image uploading logic:
1. uploaded images will be sent to the /public/uploads folder in the /backend folder. further more inside /uploads there are sub folders indecate each sub section the images belong to (for example the /categories folder).

2. the images should also be named appropriately based on what their use (like if they belong to a category).

3. all proper validation for image file such as file size and allowed file type should be implemented properly.

4. deleting images should be done using a separate endpoint and the stored image will also be deleted. also on update the previous image should be replaced/overwritten.

note that all implementation should be professional, so that the project is organized and well structured.